{
  "$id": "http://example.com/proveedor.json",
  "type": "object",
  "namespace": "cxp",
  "title": "Proveedores",
  "key": "proveedor",
  "secure": false,
  "restricted": ["activo", "cedula", "tipoCedula", "email"],
  "properties": {
    "id": {
      "$id": "/properties/id",
      "type": "integer",
      "title": "Id"
    },
    "activo": {
      "$id": "/properties/activo",
      "type": "boolean",
      "title": "Activo",
      "formatter": "BooleanFormatter",
      "default": true
    },
    "name": {
      "$id": "/properties/name",
      "type": "string",
      "title": "Nombre",
      "filterable": true,
      "width": 250,
      "locked": true
    },
    "tipoCedula": {
      "$id": "/properties/tipoCedula",
      "default": "Jurídica",
      "enum": ["Jurídica", "Física", "DIMEX", "NITE", "Internacional"],
      "type": "string",
      "title": "Tipo Cedula",
      "filterable": true,
      "filterRenderer": "SelectFilter",
      "element": "select",
      "width": 200
    },
    "cedula": {
      "$id": "/properties/cedula",
      "type": "string",
      "title": "Cédula",
      "filterable": true,
      "width": 150
    },
    "moneda": {
      "$id": "/properties/moneda",
      "element": "select",
      "default": "CRC",
      "enum": ["CRC", "USD", "EUR"],
      "type": "string",
      "title": "Moneda",
      "filterable": true,
      "filterRenderer": "SelectFilter"
    },
    "email": {
      "$id": "/properties/email",
      "type": "string",
      "title": "Email",
      "pattern": "^.+@.+[.].+$",
      "filterable": true,
      "width": 250
    },
    "telefono": {
      "$id": "/properties/telefono",
      "type": "string",
      "title": "Teléfono",
      "minLength": 9,
      "maxLength": 15,
      "pattern": "^[0-9-+()]+[0-9]$"
    },
    "plazoPago": {
      "$id": "/properties/plazoPago",
      "type": "number",
      "title": "Plazo de pago",
      "default": 0
    },
    "descripcion": {
      "$id": "/properties/descripcion",
      "type": "string",
      "title": "Descripcion",
      "width": 350,
      "formatter": "TextFormatter"
    },
    "departamento": {
      "$id": "/properties/departamento",
      "type": "string",
      "title": "Departamento",
      "filterable": true,
      "width": 150
    },
    "formaPago": {
      "$id": "/properties/formaPago",
      "element": "select",
      "default": "Transferencia",
      "enum": ["Transferencia", "Efectivo", "Tarjeta", "Cheque"],
      "type": "string",
      "title": "Forma de Pago",
      "filterable": true,
      "filterRenderer": "SelectFilter"
    },
    "ownerId": {
      "$id": "/properties/ownerId",
      "type": "integer",
      "title": "Responsable",
      "table": "usuario",
      "route": "login/usuario/findLikeName",
      "element": "autocomplete",
      "api": "login",
      "filterable": true,
      "elementOptions": {
        "primary": "name"
      },
      "width": 200,
      "editable": true
    },
    "ownerName": {
      "$id": "/properties/ownerName",
      "type": "string",
      "title": "Nombre Propietario"
    },
    "createdBy": {
      "$id": "/properties/createdBy",
      "type": "string",
      "title": "Creado por"
    },
    "updatedBy": {
      "$id": "/properties/updatedBy",
      "type": "string",
      "title": "Actualizado por"
    },
    "createdAt": {
      "$id": "/properties/createdAt",
      "type": "string",
      "title": "Creado"
    },
    "updatedAt": {
      "$id": "/properties/updatedAt",
      "type": "string",
      "title": "Actualizado"
    }
  },
  "required": ["name"],
  "actions": ["Crear", "Editar"],
  "view": {
    "fields": [
      "proveedorId",
      "referencia",
      "estado",
      "fechaProgramacion",
      "fechaFactura",
      "fechaVencimiento",
      "saldo",
      "total",
      "descripcion",
      "fechaIngreso"
    ],
    "widgets": [],
    "relatedFields": [
      {
        "route": "facturaCxP/query",
        "key": "facturaCxP",
        "title": "Pagos",
        "table": "facturaCxP",
        "fields": [
          "id",
          "referencia",
          "fecha",
          "fechaProgramacion",
          "fechaFactura",
          "fechaVencimiento",
          "moneda",
          "total",
          "saldo"
        ],
        "filters": [["facturaCxP.proveedorId", "=", "$"]],
        "params": { "limit": 50 }
      },
      {
        "route": "lineaPagoCxP/query",
        "key": "lineaPagoCxP",
        "title": "Pagos",
        "table": "lineaPagoCxP",
        "fields": ["id", "referencia", "moneda", "monto", "fecha"],
        "filters": [["lineaPagoCxP.proveedorId", "=", "$"]],
        "params": { "limit": 50 }
      }
    ]
  },
  "layout": [
    {
      "cols": 4,
      "title": "Legal",
      "fields": ["tipoCedula", "cedula", "moneda"]
    },
    {
      "cols": 4,
      "title": "Administración",
      "fields": ["activo", "name", "email", "telefono"]
    },
    {
      "cols": 4,
      "title": "Detalles",
      "fields": ["departamento", "descripcion", "ownerId"]
    },
    {
      "title": "facturas",
      "cols": 12,
      "list": "facturaCxP",
      "relatedField": "proveedorId",
      "fields": ["referencia", "estado", "fechaFactura", "fechaProgramacion", "fechaVencimiento", "saldo"]
    }
  ],
  "table": {
    "sum": [],
    "fields": [
      "id",
      "name",
      "ownerId",
      "cedula",
      "tipoCedula",
      "email",
      "departamento",
      "descripcion",
      "moneda"
    ]
  }
}
