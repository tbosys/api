{
  "$id": "http://example.com/example.json",
  "type": "object",
  "multiRowAction": true,
  "limit": 100,
  "maxLimit": 5000,
  "shareLevel": 5,
  "orderBy": ["id", "DESC"],
  "restricted": ["costo", "cantidad", "precio", "tipo", "impuesto", "documentoId", "utilidad"],
  "restrictedQuery": ["utilidad", "costo"],
  "title": "Movimiento Inventario",
  "key": "movimientoInventario",
  "namespace": "facturacion",
  "properties": {
    "id": {
      "$id": "/properties/id",
      "type": "integer",
      "title": "Id"
    },

    "clienteId": {
      "$id": "/properties/clienteId",
      "type": "integer",
      "title": "Cliente",
      "table": "cliente",
      "metadataType": "cliente",
      "filterable": true,
      "width": 220,
      "route": "cliente/findLikeName",
      "element": "autocomplete",
      "elementOptions": {
        "primary": "name"
      }
    },
    "tags": {
      "$id": "/properties/tags",
      "type": "integer",
      "title": "Tag",
      "table": "cliente",
      "filterable": true,
      "width": 350,
      "select": "cliente.tags"
    },
    "productoId": {
      "$id": "/properties/producto",
      "type": "integer",
      "title": "Producto",
      "table": "producto",
      "metadataType": "producto",
      "filterable": true,
      "width": 200,
      "route": "producto/findLikeName",
      "element": "autocomplete",
      "elementOptions": {
        "primary": "name"
      }
    },
    "tipo": {
      "$id": "/properties/tipo",
      "type": "string",
      "title": "Tipo",
      "enum": ["FA", "NC", "ND", "EN", "SA", "CO"],
      "sortable": true,
      "filterable": true,
      "filterRenderer": "SelectFilter",
      "width": 100
    },
    "tipoNegociacion": {
      "$id": "/properties/tipoNegociacion",
      "type": "string",
      "title": "Negociacion",
      "sortable": true,
      "filterable": true,
      "width": 150
    },
    "tipoNegociacionMonto": {
      "$id": "/properties/tipoNegociacionMonto",
      "type": "number",
      "title": "Negociacion",
      "sortable": true,
      "filterable": true,
      "width": 150
    },
    "fecha": {
      "$id": "/properties/fecha",
      "type": "string",
      "title": "Fecha",
      "filterable": true,
      "sortable": true,
      "filterRenderer": "DateFilter"
    },
    "cantidad": {
      "$id": "/properties/cantidad",
      "type": "number",
      "title": "Cantidad"
    },
    "subTotal": {
      "$id": "/properties/subTotal",
      "type": "number",
      "title": "subTotal"
    },
    "subTotalConDescuento": {
      "$id": "/properties/subTotalConDescuento",
      "type": "number",
      "title": "Subtotal Descontado"
    },
    "descuento": {
      "$id": "/properties/descuento",
      "type": "number",
      "title": "Descuento"
    },
    "impuesto": {
      "$id": "/properties/impuesto",
      "type": "number",
      "title": "Impuesto"
    },
    "costo": {
      "$id": "/properties/costo",
      "type": "number",
      "title": "Costo"
    },
    "total": {
      "$id": "/properties/total",
      "type": "number",
      "title": "Total"
    },
    "precio": {
      "$id": "/properties/precio",
      "type": "number",
      "title": "Precio",
      "sortable": true
    },
    "descuentoUnitario": {
      "$id": "/properties/descuentoUnitario",
      "type": "number",
      "title": "Descuento(%)",
      "sortable": true
    },
    "impuestoCodigoTarifa": {
      "$id": "/properties/impuestoCodigoTarifa",
      "type": "string",
      "title": "Codigo Tarifa",
      "default": "08",
      "enum": ["01", "02", "03", "04", "05", "06", "07", "08"]
    },
    "documentoId": {
      "$id": "/properties/documentoId",
      "type": "integer",
      "title": "Documento",
      "table": "documento",
      "sortable": true,
      "fields": [["fecha", "documentoFecha", "consecutivo", "financiero"]],
      "filterable": true
    },
    "documentoFecha": {
      "$id": "/properties/documentoFecha",
      "type": "string",
      "title": "Fecha",
      "filterable": true,
      "filterRenderer": "DateFilter",
      "sortable": true,
      "select": "documento.fecha"
    },
    "consecutivo": {
      "$id": "/properties/consecutivo",
      "type": "string",
      "title": "Documento",
      "filterable": true,
      "sortable": true,
      "select": "documento.consecutivo"
    },
    "financiero": {
      "$id": "/properties/financiero",
      "type": "boolean",
      "title": "Financiero",
      "filterable": true,
      "filterRenderer": "BooleanFilter",
      "formatter": "BooleanFormatter",
      "select": "documento.financiero"
    },
    "anulacion": {
      "$id": "/properties/anulacion",
      "type": "boolean",
      "title": "Anulacion",
      "select": "(case when documento.documentoAnuladorId or documento.documentoAnuladoDeId then true else false end)",
      "filterable": true,
      "filterRenderer": "BooleanFilter",
      "formatter": "BooleanFormatter"
    },
    "boletaId": {
      "$id": "/properties/boletaId",
      "type": "integer",
      "title": "Boleta"
    },
    "ownerId": {
      "$id": "/properties/ownerId",
      "type": "integer",
      "title": "Propietario",
      "table": "owner",
      "filterable": true,
      "sortable": true,
      "route": "owner/findLikeName",
      "metadataType": "owner",
      "element": "autocomplete",
      "elementOptions": {
        "primary": "name"
      },
      "width": 250
    },

    "createdBy": {
      "$id": "/properties/createdBy",
      "type": "string",
      "title": "Creado por"
    },
    "updatedBy": {
      "$id": "/properties/updatedBy",
      "type": "string",
      "title": "Actualizado por"
    },
    "createdAt": {
      "$id": "/properties/createdAt",
      "type": "string",
      "title": "Creado",
      "width": 200,
      "filterable": true,
      "sortable": true
    },
    "updatedAt": {
      "$id": "/properties/updatedAt",
      "type": "string",
      "title": "Actualizado"
    },
    "zonaId": {
      "$id": "/properties/zonaId",
      "type": "string",
      "title": "Ruta",
      "filterable": true,
      "sortable": true,
      "select": "zona.name"
    },
    "segmentoId": {
      "$id": "/properties/segmentoId",
      "type": "string",
      "title": "Segmento",
      "filterable": true,
      "sortable": true,
      "select": "segmento.name"
    },
    "familia": {
      "$id": "/properties/familia",
      "type": "string",
      "title": "Familia",
      "filterable": true,
      "sortable": true,
      "select": "producto.familia",
      "width": 100
    },
    "subFamilia": {
      "$id": "/properties/subFamilia",
      "type": "string",
      "title": "Sub Familia",
      "filterable": true,
      "sortable": true,
      "select": "producto.subFamilia",
      "width": 190
    },
    "contado": {
      "width": 100,
      "sortable": true,
      "$id": "/properties/contado",
      "type": "string",
      "title": "Credito",
      "enum": ["contado", "credito"],
      "filterable": true,
      "select": "(case when documento.plazo = 0 then 'contado' else 'credito' end)",
      "filterRenderer": "SelectFilter"
    },
    "clase": {
      "width": 100,
      "sortable": true,
      "$id": "/properties/clase",
      "type": "string",
      "title": "Clase",
      "enum": ["venta", "ajuste"],
      "filterable": true,
      "select": "(case when movimientoInventario.tipo in ('FA','NC','ND') then 'venta' else 'ajuste' end)",
      "filterRenderer": "SelectFilter"
    },
    "comisiona": {
      "$id": "/properties/comisiona",
      "type": "boolean",
      "title": "Comisiona",
      "filterable": true,
      "sortable": true,
      "select": "owner.comisiona"
    },
    "grupoId": {
      "$id": "/properties/grupoId",
      "type": "integer",
      "title": "Grupo",
      "table": "grupo",
      "metadataType": "grupo",
      "filterable": true,
      "route": "grupo/findLikeName",
      "element": "autocomplete",
      "width": 100,
      "elementOptions": {
        "primary": "name"
      }
    },
    "utilidad": {
      "$id": "/properties/utilidad",
      "type": "number",
      "title": "Utilidad"
    },
    "grupoProductoId": {
      "$id": "/properties/grupoProductoId",
      "type": "integer",
      "select": "grupoProducto.id"
    },
    "grupoProducto": {
      "$id": "/properties/grupoProducto",
      "type": "string",
      "title": "Grupo Producto",
      "filterable": true,
      "sortable": true,
      "query": false,
      "route": "grupoProducto/findLikeName",
      "select": "grupoProducto.name",
      "width": 100
    }
  },
  "belongsTo": [
    "producto",
    "documento",
    "cliente",
    "owner",
    "cliente>segmento",
    "cliente>zona",
    "grupo",
    "producto>grupoProducto"
  ],
  "actions": [
    "Ver",
    {
      "title": "Devolver",
      "type": "modal"
    }
  ],
  "layout": [
    {
      "title": "Informaci√≥n",
      "fields": ["tipo", "cantidad"]
    },
    {
      "title": "Totales",
      "fields": ["cantidad", "subTotalConDescuento"]
    }
  ],
  "table": {
    "sum": ["cantidad", "subTotalConDescuento"],
    "fields": [
      "id",
      "clienteId",
      "tipo",
      "productoId",
      "cantidad",
      "tipoNegociacion",
      "grupoId",
      "grupoProducto",
      "consecutivo",
      "fecha",
      "ownerId",
      "contado",
      "clase",
      "anulacion",
      "financiero",
      "zonaId",
      "segmentoId",
      "familia",
      "subFamilia",
      "subTotalConDescuento",
      "impuesto",
      "total",
      "boletaId",
      "createdAt",
      "tags",
      "comisiona",
      "utilidad",
      "tipoNegociacionMonto"
    ]
  }
}
